var el_CY = [
    '7640',
    '7642',
    '7648',
    '7647',
    '7742',
    '7575',
    '2560',
    '2562',
    '2563',
    '2564',
    '2565',
    '2566',
    '2568',
    '2570',
    '2573',
    '2574',
    '2600',
    '2610',
    '2611',
    '2612',
    '2613',
    '2614',
    '2615',
    '2616',
    '2617',
    '2618',
    '2619',
    '2620',
    '2621',
    '2622',
    '2623',
    '2624',
    '2630',
    '2640',
    '2641',
    '2642',
    '2643',
    '2644',
    '2645',
    '2646',
    '2647',
    '2648',
    '2649',
    '2650',
    '2651',
    '2652',
    '2653',
    '2654',
    '2660',
    '2666',
    '2670',
    '2671',
    '2675',
    '2679',
    '2682',
    '2690',
    '2720',
    '2722',
    '2728',
    '2731',
    '2732',
    '2740',
    '2745',
    '2750',
    '2751',
    '2752',
    '2753',
    '2754',
    '2755',
    '2756',
    '2757',
    '2758',
    '2770',
    '2771',
    '2772',
    '2773',
    '2774',
    '2775',
    '2776',
    '2777',
    '2778',
    '2779',
    '2780',
    '2781',
    '2782',
    '2800',
    '2810',
    '2811',
    '2820',
    '2821',
    '2822',
    '2823',
    '2824',
    '2825',
    '2826',
    '2827',
    '2828',
    '2829',
    '2831',
    '2832',
    '2833',
    '2834',
    '2835',
    '2836',
    '2837',
    '2839',
    '2840',
    '2841',
    '2842',
    '2843',
    '2844',
    '2845',
    '2846',
    '2850',
    '2860',
    '2861',
    '2862',
    '2863',
    '2864',
    '2865',
    '2866',
    '2867',
    '2868',
    '2869',
    '2940',
    '2950',
    '2951',
    '2952',
    '2953',
    '2958',
    '2960',
    '2961',
    '2962',
    '2963',
    '2964',
    '2965',
    '8240',
    '8260',
    '8290',
    '8300',
    '8310',
    '8500',
    '8501',
    '8502',
    '8503',
    '8504',
    '8505',
    '8506',
    '8507',
    '8508',
    '8509',
    '8510',
    '8520',
    '8521',
    '8522',
    '8523',
    '8524',
    '8525',
    '8526',
    '8540',
    '8541',
    '8542',
    '8543',
    '8544',
    '8545',
    '8546',
    '8547',
    '8548',
    '8549',
    '8550',
    '8551',
    '8552',
    '8570',
    '8571',
    '8572',
    '8573',
    '8576',
    '8577',
    '8588',
    '8589',
    '8600',
    '8601',
    '8602',
    '8603',
    '8604',
    '8605',
    '8606',
    '8607',
    '8608',
    '8609',
    '8620',
    '8621',
    '8622',
    '8623',
    '8624',
    '8625',
    '8626',
    '8627',
    '8628',
    '8629',
    '8630',
    '8631',
    '8640',
    '8641',
    '8642',
    '8643',
    '8644',
    '8645',
    '8646',
    '8647',
    '8648',
    '8649',
    '8650',
    '8651',
    '8652',
    '8653',
    '8654',
    '8700',
    '8701',
    '8702',
    '8703',
    '8704',
    '8705',
    '8706',
    '8720',
    '8721',
    '8722',
    '8723',
    '8724',
    '8725',
    '8726',
    '8727',
    '8728',
    '8729',
    '8730',
    '8740',
    '8741',
    '8742',
    '8743',
    '8744',
    '8745',
    '8746',
    '8747',
    '8748',
    '8749',
    '8800',
    '8801',
    '8802',
    '8803',
    '8804',
    '8805',
    '8806',
    '8807',
    '8808',
    '8809',
    '8810',
    '8811',
    '8812',
    '8813',
    '8814',
    '8840',
    '8850',
    '8852',
    '8853',
    '8855',
    '8870',
    '8871',
    '8872',
    '8873',
    '8874',
    '8875',
    '8876',
    '8877',
    '8878',
    '8879',
    '8880',
    '8881',
    '8882',
    '8883',
    '8884',
    '3370',
    '4500',
    '4501',
    '4502',
    '4503',
    '4504',
    '4505',
    '4506',
    '4507',
    '4508',
    '4509',
    '4510',
    '4511',
    '4522',
    '4523',
    '4524',
    '4525',
    '4526',
    '4528',
    '4529',
    '4530',
    '4540',
    '4541',
    '4542',
    '4543',
    '4544',
    '4545',
    '4546',
    '4547',
    '4548',
    '4549',
    '4550',
    '4552',
    '4560',
    '4561',
    '4562',
    '4563',
    '4564',
    '4565',
    '4566',
    '4567',
    '4568',
    '4569',
    '4600',
    '4601',
    '4602',
    '4603',
    '4604',
    '4605',
    '4606',
    '4607',
    '4608',
    '4610',
    '4631',
    '4633',
    '4634',
    '4635',
    '4640',
    '4650',
    '4700',
    '4710',
    '4711',
    '4712',
    '4713',
    '4714',
    '4715',
    '4716',
    '4717',
    '4730',
    '4740',
    '4741',
    '4742',
    '4743',
    '4744',
    '4745',
    '4746',
    '4747',
    '4748',
    '4749',
    '4750',
    '4751',
    '4760',
    '4770',
    '4771',
    '4772',
    '4773',
    '4774',
    '4775',
    '4776',
    '4777',
    '4778',
    '4779',
    '4780',
    '4781',
    '4800',
    '4810',
    '4811',
    '4812',
    '4813',
    '4814',
    '4815',
    '4820',
    '4825',
    '4840',
    '4841',
    '4842',
    '4843',
    '4844',
    '4845',
    '4846',
    '4847',
    '4848',
    '4860',
    '4866',
    '4870',
    '4871',
    '4872',
    '4873',
    '4874',
    '4875',
    '4876',
    '4877',
    '4878',
    '4874',
    '4875',
    '4876',
    '4877',
    '4878',
    '4879',
    '7573',
    '7574',
    '7576',
    '7577',
    '7578',
    '7600',
    '7621',
    '4874',
    '4875',
    '4876',
    '4877',
    '4878',
    '4879',
    '7573',
    '7574',
    '7575',
    '7576',
    '7577',
    '7578',
    '7600',
    '7621',
    '7641',
    '7643',
    '7644',
    '7645',
    '7646',
    '7649',
    '7650',
    '7700',
    '7705',
    '7710',
    '7711',
    '7712',
    '7713',
    '7714',
    '7715',
    '7716',
    '7717',
    '7718',
    '7719',
    '7721',
    '7722',
    '7730',
    '7731',
    '7732',
    '7733',
    '7734',
    '7735',
    '7736',
    '7737',
    '7738',
    '7739',
    '7740',
    '7741',
    '7743',
];

var IT_potencyoutlb = [
    '22060',
    '23041',
    '47890',
]

var ES_slimoutlb = [
    '51001:51005',
    '51070:51071',
    "51080:51080",
    '52001:52006',
    '35139:35149',
    '35240:35250',
    '35269:35280',
    '35333:35349',
    '35412:35432',
    '35510:35519',
    '35550:35559',
    '35600:35613',
    '38001:38329',
    '38200:38208',
    '38295:38298',
    '38330:38350',
    '38355:38360',
    '38410:38412',
    '38410:38419',
    '38420:38429',
    '38440:38449',
    '38450:38460',
    '38580:38589',
    '38594:38611',
    '38639:38652',
    '38660:38679',
    '38685:38689',
    '38710:38713',
    '38730:38739',
    '38750:38759',
    '38810:38813',
    '38840:38869',
    '38911:38913',
];

function getCodesFromRanges(ranges) {

    var split = [], tab = [];
    for(var i = 0; i<ranges.length; i++) {
        split[i] = ranges[i].toString().split(":");
    }
    for(var i = 0; i < split.length; i++) {
        for(var j = split[i][0]; j <= split[i][1]; j++){
            tab.push(j.toString());
        }
    }

    return tab;
};

document.addEventListener("DOMContentLoaded", function () {
    var row_pcode = document.querySelector(".row_pcode");
    var pcode_div = row_pcode.querySelector("div");
    var input = row_pcode.querySelector("div input");
    var submit = (document.querySelector(".row_save")).querySelector("button");
    var tab = [];

    if (locale === "el_CY") {
        tab = el_CY;
    }
    if (affiliation) {
        if (group === "slimoutlb" && locale.includes("ES")) {
            tab = getCodesFromRanges(ES_slimoutlb);
        }
        if (group === "potencyoutlb" && locale.includes("IT")) {
            tab = IT_potencyoutlb;
        }
    }
    console.log(tab);


    var error = pcode_div.querySelector(".wrong_pcode");

    input.addEventListener("blur", function () {
        if (tab.find(x => x === input.value)) {
            submit.disabled = true;
            error.style.display = "block";
            submit.style.filter = "grayscale(80%)";
            submit.style.cursor = "not-allowed";
        } else {
            submit.disabled = false;
            error.style.display = "none";
            submit.style.filter = "grayscale(0%)";
            submit.style.cursor = "pointer";
        }
    });
});
