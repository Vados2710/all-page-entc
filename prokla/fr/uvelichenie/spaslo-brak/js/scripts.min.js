$(function () {


    function initQuiz() {
        var counter = 0;
        var next_button = document.getElementById("js_q_next");
        var items = $(".q_item");

        next_button.addEventListener("click", nextQuestion, false);


        function nextQuestion() {
            var self = this;
            if ($(self).hasClass("disabled")) return;
            if (counter == (items.length - 1)) {
                $(".q_questions, .q_product").fadeOut(300, function () {
                    $(".q_result").fadeIn(300);
                });

                return;
            }
            $(self).addClass("disabled");
            $(items[counter]).fadeOut(300, function () {
                $(items[++counter]).fadeIn(300);

            });
        }


        $(".q_item_answer").on("click", function () {
            $(next_button).removeClass("disabled");
        });


    }


    initQuiz();

    function interactiveCreamDesktop() {

        var cream = document.getElementById("js_i-cream");
        var before = document.getElementById("js_i-before");
        var main = document.getElementById("js_i-main");
        var main_height = main.clientHeight;
        var cream_start_top = -6;
        var cream_line_offset = 14.4;
        cream.style.top = cream_start_top + "%";
        before.style.top = (cream_start_top + cream_line_offset) + "%";
        var isDown = false;
        cream.addEventListener('mousedown', function (e) {
            isDown = true;
            offset = cream.offsetTop - e.clientY;
        }, true);

        document.addEventListener('mouseup', function () {
            isDown = false;
        }, true);

        document.addEventListener('mousemove', function (event) {
            event.preventDefault();
            if (isDown) {
                mousePosition = {
                    y: event.clientY
                };
                var current_pos = (mousePosition.y + offset) / main_height * 100;
                console.log(current_pos);
                if (current_pos > cream_start_top && current_pos < 80) {
                    cream.style.top = current_pos + '%';
                    before.style.top = (current_pos + cream_line_offset) + "%"
                }
            }
        }, true);
    }

    function interactiveCreamMobile() {
        $("#js_i-before").animate({
            top: "95%"
        }, 3000, function () {

            $("#js_i-before").animate({
                top: "5%"
            }, 3000);
        });

        setInterval(function () {


            $("#js_i-before").animate({
                top: "82%"
            }, 3000, function () {

                $("#js_i-before").animate({
                    top: "18%"
                }, 3000);
            });


        }, 6000);

    }
    if (window.innerWidth > 991.98) {
        interactiveCreamDesktop();
    } else {
        interactiveCreamMobile();
    }
/*
    function setTimes() {
        var currentDate = new Date();
        var timeAMPM = ((currentDate.getHours() - 12 < 10) ? "0" : "") + ((currentDate.getHours() > 12) ? (currentDate.getHours() - 12) : currentDate.getHours()) + ":" + ((currentDate.getMinutes() < 10) ? "0" : "") + currentDate.getMinutes() + ((currentDate.getHours() > 12) ? ('PM') : 'AM');
        $(".js-ampm-time").text(timeAMPM);

        var publish_date = new Date();
        publish_date.setDate(currentDate.getDate() - 5);
        var locale = navigator.languages[0] ? navigator.languages[0] : "en-US";
        var publish_month = publish_date.toLocaleString(locale, {
            month: "long"
        });
        $(".js-publish-date").text(publish_month + " " + publish_date.getDate() + ", " + publish_date.getFullYear());
    }
    setTimes();
*/

    $('.to-form').on("click", function () {
        $("html, body").animate({
            scrollTop: $(".target_form").offset().top - 30
        }, 1000);
        return false;
    });


});
