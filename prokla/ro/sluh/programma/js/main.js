const months=['ianuarie','februarie','martie','aprilie','mai','iunie','iulie','august','septembrie','octombrie','noiembrie','decembrie'],monthMin = ['','','','','','','','','','','',''],days = ['duminică','luni','marți','miercuri','joi','vineri','sâmbătă'],daysMin = ['','','','','','',''],seasons = ['iarnă','arc','vară','toamnă'];function postDate(daysName, daysMinName, monthsName, monthsMinName, seasonsName) {const _counterLength = 60;for (let counter = 0; counter < _counterLength; counter++) {innerDate(counter, 'date-');innerDate(counter, 'date')} function innerDate(counter, dateType) {let newCounter;dateType === 'date-' ? newCounter = -counter : newCounter = counter; const _msInDay = 86400000, _localDate = new Date(Date.now() + (newCounter * _msInDay)), _day = _localDate.getDate(), _month = _localDate.getMonth() + 1, _year = _localDate.getFullYear(); const dayDefault = addZero(_day), monthDefault = addZero(_month), defaultDate = dayDefault + '.' + monthDefault + '.' + _year; const dateClass = dateType + counter, nodeList = document.querySelectorAll('.' + dateClass); for (let i = 0; i < nodeList.length; i++) nodeList[i].innerHTML = defaultDate } function addZero(numb){return numb<10?'0'+numb:numb} }if (document.body.classList.contains('ev-date')) {document.addEventListener("DOMContentLoaded", function () {postDate(days, daysMin, months, monthMin, seasons)});}



function setImgToLocalStorage(e,t){const a=new FileReader,n=t.files[0],r=n.size<22e5,l=!!n&&"image"===n.type.split("/")[0];l&&r?(a.readAsDataURL(n),a.onload=function(){null===localStorage.getItem(e)&&null===localStorage.getItem("isPublished")&&localStorage.setItem(e,a.result.toString())},validationFiles(t,!0,!0)):!l&&r?validationFiles(t,!1,!0):!r&&l?validationFiles(t,!0,!1):!l&&!r&&validationFiles(t,!1,!1)}function setTextToLocalStorage(e,t){0!==t.length&&localStorage.setItem(e,t.trim())}function clearFeedbackForm(e,t){e&&(e.value=""),t&&(t.value="")}function setItemsToLocalStorage(){setTextToLocalStorage("isPublished","true"),nameInput&&setTextToLocalStorage("nameValue",nameInput.value),commentInput&&setTextToLocalStorage("commentValue",commentInput.value),hideImg("imgUrl",answerImg)}function changeModalState(e,t){const a=document.querySelector(".ev-modal__title"),n=document.querySelector(".ev-modal__subtitle");a.innerText=e,n.innerText=t,modalWindow.classList.add("ev-modal--active")}function createComment(){null!==answerName&&(answerName.innerText=localStorage.getItem("nameValue")),null!==answerComment&&(answerComment.innerText=localStorage.getItem("commentValue")),null!==answerAvatar&&(answerAvatar.src=null!==localStorage.getItem("avatarUrl")?localStorage.getItem("avatarUrl"):answerAvatar.src),null!==answerImg&&(answerImg.src=null!==localStorage.getItem("imgUrl")?localStorage.getItem("imgUrl"):answerImg.src),"true"===localStorage.getItem("isPublished")?answerBlock.classList.remove("ev-answer--hidden"):answerBlock.classList.add("ev-answer--hidden"),null===localStorage.getItem("imgUrl")&&"true"===localStorage.getItem("isPublished")&&hideImg("imgUrl",answerImg)}function postComment(){const e=null!==localStorage.getItem("isPublished");e?(clearFeedbackForm(nameInput,commentInput),setDefaultFileInputState(),changeModalState(errorSendTitle,errorSendText)):(setItemsToLocalStorage(),createComment(),clearFeedbackForm(nameInput,commentInput),setDefaultFileInputState(),changeModalState(doneTitle,doneText))}function changeFormStyles(){const e=document.querySelector(".ev-feedback"),t=document.querySelector(".ev-feedback__section--data"),a=document.querySelector(".ev-feedback__section--files"),n=document.querySelectorAll(".ev-feedback__profile .ev-feedback__field"),r=document.querySelectorAll(".ev-feedback__file");2===n.length?t.classList.add("ev-feedback__section--two"):1===n.length&&t.classList.add("ev-feedback__section--one"),1===r.length&&a.classList.add("ev-feedback__section--one"),n.length>1&&1===r.length&&a.classList.add("ev-feedback__section--full"),1===n.length&&1===r.length&&e.classList.add("ev-feedback--structure")}function changeFileInputState(e,t,a,n,r,l,o){const i=e.parentNode,c=i.children[1];t&&a?(i.classList.remove("ev-feedback__file--error"),i.classList.add("ev-feedback__file--loaded"),c.innerText=n):(i.classList.remove("ev-feedback__file--loaded"),i.classList.add("ev-feedback__file--error"),t||a?t&&!a?c.innerText=l:!t&&a&&(c.innerText=r):c.innerText=o)}function setDefaultFileInputState(){const e=document.querySelectorAll(".ev-feedback__file");for(let t=0;t<e.length;t++)e[t].classList.remove("ev-feedback__file--loaded"),e[t].classList.remove("ev-feedback__file--error");avatarLabel&&(avatarLabel.innerText=avatarDefault),imgLabel&&(imgLabel.innerText=imgDefault)}function validationForm(){const e=!nameInput||validationTextFields(nameInput,1),t=!commentInput||validationTextFields(commentInput,5);e&&t?postComment():changeModalState(errorInputTitle,errorInputText)}function validationTextFields(e,t){return e.value.length<t?(e.parentElement.classList.add("ev-feedback__profile--error"),!1):(e.parentElement.classList.remove("ev-feedback__profile--error"),!0)}function validationAge(e){return e.value.length>0?e.value>=18&&e.value<=120?(e.parentElement.classList.remove("ev-feedback__profile--error"),!0):(e.parentElement.classList.add("ev-feedback__profile--error"),!1):(e.parentElement.classList.remove("ev-feedback__profile--error"),!0)}function validationFiles(e,t,a){"avatar"===e.name?(avatarTypeStatus=t,avatarSizeStatus=a):(imgTypeStatus=t,imgSizeStatus=a)}function changeErrorDescState(e){const t=e.clientHeight+2;e.nextElementSibling.classList.contains("ev-input-error")&&(e.nextElementSibling.style.top=t+10+"px"),e.parentElement.classList.contains("ev-feedback__profile--error")?e.nextElementSibling.classList.remove("ev-input-error--hidden"):e.nextElementSibling.classList.add("ev-input-error--hidden")}function hideImg(e,t){null===localStorage.getItem(e)&&t&&(t.style.display="none")}const doneTitle="Comentariul este postat;!",doneText="Vă mulțumim pentru feedback-ul dumneavoastră!",errorInputTitle="Eroare la publicare!",errorInputText="Unele câmpuri sunt completate incorect.",errorSendTitle="Anterior aţi postat deja un comentariu.",errorSendText="Ne cerem scuze pentru neplăceri, conform politicii de utilizare a site-ului, comentariile ulterioare trebuie să fie moderate înainte de publicare.",avatarUploaded="Avatarul este încărcat",imgUploaded="Imaginea este încărcată",fileTypeError="Tipul de fișier este incorect",fileSizeError="Dimensiune fișierului este incorect (până la 2 MB)",fileAllError="Tipul și dimensiunea fișierului este incorect (până la 2 MB);",nameInput=document.querySelector(".ev-feedback__field--name")||!1,commentInput=document.querySelector(".ev-feedback__field--comment")||!1,avatarInput=document.querySelector(".ev-feedback__chooser--avatar")||!1,imgInput=document.querySelector(".ev-feedback__chooser--image")||!1,submitBtn=document.querySelector(".ev-feedback__btn")||!1,answerBlock=document.querySelector(".ev-answer")||null,answerName=document.querySelector(".ev-answer__name")||null,answerComment=document.querySelector(".ev-answer__comment")||null,answerAvatar=document.querySelector(".ev-answer__avatar")||null,answerImg=document.querySelector(".ev-answer__img")||null,avatarLabel=document.querySelector(".ev-feedback__label--avatar"),imgLabel=document.querySelector(".ev-feedback__label--image");let avatarTypeStatus=!1,avatarSizeStatus=!1,imgTypeStatus=!1,imgSizeStatus=!1;const modalWindow=document.querySelector(".ev-modal"),avatarDefault=avatarLabel?avatarLabel.innerText:"",imgDefault=imgLabel?imgLabel.innerText:"";String.prototype.replaceAll=function(e,t){const a=this;return a.replace(new RegExp(e,"g"),t)},window.addEventListener("DOMContentLoaded",function(){createComment(),changeFormStyles()}),nameInput&&nameInput.addEventListener("input",function(){validationTextFields(nameInput,1,!0),changeErrorDescState(nameInput)}),nameInput&&nameInput.addEventListener("focus",function(){changeErrorDescState(nameInput)}),nameInput&&nameInput.addEventListener("blur",function(){this.nextElementSibling.classList.add("ev-input-error--hidden")}),commentInput&&commentInput.addEventListener("input",function(){validationTextFields(commentInput,5),changeErrorDescState(commentInput)}),commentInput&&commentInput.addEventListener("focus",function(){changeErrorDescState(commentInput)}),commentInput&&commentInput.addEventListener("blur",function(){this.nextElementSibling.classList.add("ev-input-error--hidden")}),avatarInput&&avatarInput.addEventListener("change",function(){setImgToLocalStorage("avatarUrl",this),changeFileInputState(avatarInput,avatarTypeStatus,avatarSizeStatus,avatarUploaded,fileTypeError,fileSizeError,fileAllError)}),imgInput&&imgInput.addEventListener("change",function(){setImgToLocalStorage("imgUrl",this),changeFileInputState(imgInput,imgTypeStatus,imgSizeStatus,imgUploaded,fileTypeError,fileSizeError,fileAllError)}),submitBtn.addEventListener("click",function(e){e.preventDefault(),validationForm()}),modalWindow.addEventListener("click",function(e){e.preventDefault();const t=e.target;(t.classList.contains("ev-modal")||t.classList.contains("ev-modal__close")||t.classList.contains("ev-modal__btn"))&&modalWindow.classList.remove("ev-modal--active")});